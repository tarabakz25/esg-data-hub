# ESG Data Hub - ユーザー向けサイトマップ

## 🏠 ホーム・基本情報

### メインページ
- **`/`** - ランディングページ
  - システム概要・機能紹介
  - 効果指標（工数50%削減、監査指摘率50%減）
  - 主要機能へのクイックアクセス
  - ISSB/CSRD/GRI対応基準の説明

### 認証・アカウント
- **`/signin`** - サインイン
  - OAuth認証（Google/Microsoft）
  - ロールベース権限管理
  - セッション管理

---

## 📊 メインダッシュボード

### ダッシュボード機能
- **`/dashboard`** - ESG統合ダッシュボード
  - KPI可視化（CO₂排出量、エネルギー消費、リサイクル率）
  - リアルタイム監視チャート
  - コンプライアンススコア表示
  - データ完全性・監査指摘事項サマリー

### 個別ダッシュボード機能
- **`/dashboard/ingest`** - データ取込ダッシュボード
  - アップロード進行状況
  - 処理ステータス監視
  - エラーログ・アラート確認

- **`/dashboard/mapping`** - 自動マッピングウィザード
  - AI意味解析結果表示
  - 手動調整インターフェース
  - マッピング精度確認

- **`/dashboard/kpis`** - KPI詳細ダッシュボード
  - KPI別詳細分析
  - トレンド分析・比較
  - 達成状況レポート

- **`/dashboard/compliance`** - コンプライアンス監視
  - 監査準備状況
  - 規制要件チェック
  - アクションアイテム管理

- **`/dashboard/file-details/[id]`** - ファイル詳細
  - アップロードファイル詳細情報
  - 処理履歴・ログ
  - データ品質レポート

---

## 🗂️ データ管理・アップロード

### データ管理
- **`/data-management`** - データ管理ハブ
  - データソース一覧・管理
  - アップロード履歴
  - データ品質ステータス
  - 統合処理チェーン管理

### データアップロード
- **`/upload`** - ファイルアップロード
  - CSV/Excel/JSON対応
  - ドラッグ&ドロップUI
  - プレビュー・検証機能
  - バッチ処理設定

---

## 📋 コンプライアンス・監査

### KPIコンプライアンス
- **`/kpi-compliance`** - KPI監視システム
  - 欠損KPI自動検出
  - 期日管理・エスカレーション
  - 部門別責任分担
  - アラート通知設定

### KPI要件管理
- **`/kpi-requirements`** - KPI要件管理
  - ISSB/CSRD必須項目確認
  - 期限・締切管理
  - 担当部門アサイン
  - 進捗トラッキング

---

## 📚 データカタログ・検索

### カタログ機能
- **`/catalog`** - データカタログ
  - KPI検索・フィルタリング
  - データソース一覧
  - 統計情報ダッシュボード
  - メタデータ管理

---

## 📄 レコード・履歴管理

### レコード管理
- **`/records`** - データレコード一覧
  - 全データレコード検索
  - フィルタリング・ソート
  - バルク操作

### 履歴・監査証跡
- **`/records/[id]/history`** - レコード履歴詳細
  - 変更履歴タイムライン
  - 監査証跡確認
  - 承認フロー状況
  - ユーザー操作ログ

---

## 🧪 テスト・開発機能

### テスト画面
- **`/test`** - システムテスト画面
- **`/test-notifications`** - 通知テスト
- **`/test-styles`** - UIスタイルテスト

---

## 🔌 API・連携機能

### REST API エンドポイント

#### 認証・ヘルスチェック
- **`GET /api/health`** - システムヘルスチェック
- **`POST /api/auth/[...nextauth]`** - NextAuth認証

#### データカタログAPI
- **`GET /api/catalog/kpis`** - KPI検索
  - クエリパラメータ: q, regulation, category, unit, page, limit
- **`GET /api/catalog/kpis/[id]`** - KPI詳細取得
- **`GET /api/catalog/datasources`** - データソース検索
- **`GET /api/catalog/datasources/[id]`** - データソース詳細
- **`GET /api/catalog/stats`** - カタログ統計情報

#### データ処理API
- **`POST /api/ingest`** - データ取込
- **`POST /api/csv/analyze`** - CSV分析
- **`POST /api/mapping/csv-analysis`** - CSV自動マッピング

#### ダッシュボードAPI
- **`GET /api/dashboard/kpis`** - ダッシュボードKPI
- **`GET /api/dashboard/cumulative-kpis`** - 累積KPI
- **`GET /api/dashboard/file-details/[id]`** - ファイル詳細
- **`GET /api/dashboard/file-history`** - ファイル履歴
- **`GET /api/dashboard/processing-status/[uploadId]`** - 処理ステータス

#### コンプライアンス・監査API
- **`GET /api/compliance/check`** - コンプライアンスチェック
- **`GET /api/compliance/history`** - コンプライアンス履歴
- **`POST /api/compliance/test`** - コンプライアンステスト

#### 高度な機能API
- **`POST /api/rag`** - RAG（検索拡張生成）
- **`POST /api/embedding/generate`** - 埋め込み生成
- **`GET /api/embedding/sample`** - 埋め込みサンプル
- **`GET /api/kpi/similarity`** - KPI類似性検索
- **`POST /api/jobs/kpi-missing-check`** - KPI欠損チェックジョブ

#### 通知・アラート
- **`GET /api/notifications/[id]`** - 通知詳細
- **`POST /api/notifications/[id]/read`** - 通知既読化
- **`GET /api/notifications/stats`** - 通知統計
- **`GET /api/alert-logs`** - アラートログ

### GraphQL API
- **`POST /api/graphql`** - GraphQLクエリエンドポイント
  - 統合データクエリ
  - リアルタイム統計
  - 複雑な関連データ取得

---

## 👥 ユーザーロール・権限

### ロール定義

#### 管理者 (admin)
- **全機能アクセス権**
- システム設定・ユーザー管理
- 全データの読み書き・削除・承認

#### IR責任者 (ir_manager)
- **ESGデータ管理** - データアップロード・編集
- **レポート作成** - 報告書生成・出力
- **ワークフロー承認** - データ承認フロー

#### 監査担当 (auditor)
- **読み取り専用アクセス** - データ・レポート閲覧
- **監査機能** - 証跡確認・監査ログ記録
- **コンプライアンス確認**

#### 閲覧者 (viewer)
- **基本閲覧権限** - データ・レポート閲覧のみ
- **ダッシュボード確認**

---

## 📱 ユーザーエクスペリエンス

### レスポンシブ対応
- **デスクトップ** - フル機能UI
- **タブレット** - 最適化レイアウト
- **モバイル** - 主要機能アクセス

### パフォーマンス
- **初回読み込み** ≤ 2秒
- **KPI自動マッピング** ≤ 500ms
- **ダッシュボード更新** リアルタイム

### アクセシビリティ
- **キーボードナビゲーション**対応
- **スクリーンリーダー**対応
- **カラーコントラスト**WCAG準拠

---

## 🔒 セキュリティ・プライバシー

### データ保護
- **暗号化** - AES-256 at rest
- **HTTPS** - 通信暗号化
- **バックアップ** - 自動データバックアップ

### 監査・ログ
- **操作ログ** - 全ユーザー操作記録
- **アクセスログ** - API・画面アクセス記録
- **変更履歴** - データ変更の完全トレーサビリティ

### コンプライアンス準拠
- **ISO 27001** - 情報セキュリティ管理
- **SOC 2 Type II** - セキュリティ統制（計画中）
- **GDPR** - 個人データ保護準拠

---

## 🚀 システム連携

### 外部システム統合
- **ERP連携** - SAP/Oracle対応
- **BI Tool** - Power BI/Tableau連携
- **Slack通知** - アラート・レポート配信
- **Email通知** - 期日・承認通知

### データフォーマット対応
- **インポート** - CSV, Excel, JSON, API
- **エクスポート** - PDF, XBRL, CSV, JSON
- **規制対応** - ISSB, CSRD, GRI, TCFD

---

## 📈 分析・レポート機能

### リアルタイム分析
- **KPIトレンド分析**
- **コンプライアンス状況**
- **データ品質スコア**
- **処理パフォーマンス**

### レポート出力
- **監査レポート** - 証跡・変更履歴
- **コンプライアンスレポート** - 規制要件準拠状況
- **KPIサマリー** - 期間別パフォーマンス
- **カスタムレポート** - ユーザー定義形式

---

## 💡 今後の機能拡張

### Phase 2 計画
- **AI翻訳機能** - 多言語対応
- **予測分析** - KPIトレンド予測
- **カスタムダッシュボード** - ユーザー作成画面
- **高度な統計分析** - 業界ベンチマーク

### 企業向け拡張
- **SSO統合** - SAML/OIDC対応
- **API Rate Limiting** - 企業利用制限
- **カスタムブランディング** - 企業ロゴ・色設定
- **専用インスタンス** - 独立環境提供

このサイトマップは、**ESG Data Hub**の完全な機能ガイドとして、すべてのユーザーロールに対する利用可能機能を網羅しています。各機能は3週間のMVP開発期間内に実装され、プロダクション環境で利用可能です。 